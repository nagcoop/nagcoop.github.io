<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NAGCOOP ‚Äì Portal</title>
  <meta name="description" content="Portal NAGCOOP com not√≠cias e v√≠deos, integrado ao Firebase (Auth, Firestore, Storage)." />
  <meta property="og:title" content="NAGCOOP ‚Äì Portal" />
  <meta property="og:description" content="Not√≠cias e v√≠deos com integra√ß√£o Firebase." />
  <meta property="og:type" content="website" />
  <link rel="stylesheet" crossorigin href="/assets/index-CM7jCZ0o.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>NAGCOOP</h1>
      <nav aria-label="Navega√ß√£o principal">
        <a href="#" class="linklike">In√≠cio</a>
        <a href="#downloads" class="linklike">Downloads</a>
        <a href="admin.html" class="linklike" id="adminLink" style="display:none">Admin</a>
        <span style="flex:1"></span>
        <a href="login.html" class="linklike" id="loginLink">Entrar</a>
        <a href="#" class="linklike" id="logoutLink" style="display:none">Sair</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section>
      <h2>Not√≠cias &amp; V√≠deos</h2>
      <div id="posts" aria-live="polite">
        <p>Carregando posts‚Ä¶</p>
      </div>
    </section>

    <section id="downloads" style="margin-top:2rem">
      <h2>Downloads</h2>
      <p>Exemplo de √°rea para arquivos √∫teis da cooperativa.</p>
      <ul>
        <li><a href="#" aria-disabled="true">Regulamento (em breve)</a></li>
        <li><a href="#" aria-disabled="true">Formul√°rios (em breve)</a></li>
      </ul>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">¬© <span id="y"></span> NAGCOOP ‚Ä¢ Todos os direitos reservados.</div>
  </footer>

  <script>
    // Ano no rodap√©
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>

  <!-- Firebase SDKs (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

  <!-- Sua configura√ß√£o do Firebase + servi√ßos (db, storage) -->
  <script src="js/firebase-config.js"></script>

  <!-- App: renderiza√ß√£o da cole√ß√£o `posts` do Firestore -->
  <script src="js/app.js"></script>

  <!-- Controle de UI por autentica√ß√£o (corrigido: Admin oculto quando deslogado) -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const loginLink  = document.getElementById("loginLink");
      const logoutLink = document.getElementById("logoutLink");
      const adminLink  = document.getElementById("adminLink");

      // Observa o estado de login
      firebase.auth().onAuthStateChanged(function (user) {
        const logged = !!user;

        if (loginLink)  loginLink.style.display  = logged ? "none" : "inline-block";
        if (logoutLink) logoutLink.style.display = logged ? "inline-block" : "none";

        // üîß ALTERA√á√ÉO SOLICITADA: Admin s√≥ aparece logado
        if (adminLink)  adminLink.style.display  = logged ? "inline-block" : "none";
      });

      // Sair
      if (logoutLink) {
        logoutLink.addEventListener("click", async function (e) {
          e.preventDefault();
          try {
            await firebase.auth().signOut();
          } catch (err) {
            console.error("Erro ao sair:", err);
            alert("N√£o foi poss√≠vel sair. Tente novamente.");
          }
        });
      }
    });
  </script>

  <noscript>
    <div class="container">
      <p class="error">Ative o JavaScript para usar o portal.</p>
    </div>
  </noscript>
</body>
</html>
